<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Melec Building ‚Äî Electrical Services</title>

  <!-- Font Awesome (solid icons) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{ --header-h:68px }
    :root{ --bg-1:#0b0c0d; --bg-2:#141516; --fg:#ffffff; --muted:#b8c2cc; --accent:#33a8ff }
    body.light { --bg-1:#f6f8fb; --bg-2:#eef3fb; --fg:#07101a; --muted:#475569; --accent:#0066ff }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(135deg,var(--bg-1),var(--bg-2));color:var(--fg);-webkit-font-smoothing:antialiased}
    a{color:inherit}

    /* Header */
    header{height:var(--header-h);display:flex;align-items:center;justify-content:space-between;padding:0 18px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);position:sticky;top:0;z-index:60}
    .logo{font-weight:800;letter-spacing:1px;font-size:1.05rem;color:var(--accent)}

    .header-center{flex:1;display:flex;justify-content:center}
    nav{display:flex;align-items:center}
    ul.nav-list{list-style:none;display:flex;gap:28px;align-items:center;margin:0;padding:0}
    ul.nav-list li a{font-weight:700;padding:8px 6px;border-radius:8px}
    ul.nav-list li a.active{color:var(--accent);background:rgba(255,255,255,0.02)}

    /* desktop controls */
    .controls-desktop{display:flex;align-items:center;gap:10px}
    .circle-btn{width:44px;height:44px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;border:2px solid var(--fg);background:transparent;color:var(--fg);cursor:pointer;font-weight:700}
    .circle-btn.small{width:40px;height:40px}
    .lang-btn{min-width:44px;padding:0 10px;border-radius:10px;font-weight:700;background:transparent}

    /* hamburger */
    .hamburger{display:none;border:0;background:transparent;padding:10px;cursor:pointer}
    .hamburger .bar{width:26px;height:3px;background:var(--fg);display:block;border-radius:3px;margin:4px 0}

    /* main */
    main{flex:1;padding:28px 18px;max-width:1100px;margin:0 auto;width:100%}
    .hero{min-height:56vh;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:40px 18px;border-radius:12px;background:linear-gradient(180deg,transparent,rgba(255,255,255,0.01));box-shadow:0 8px 40px rgba(0,0,0,0.15);margin-bottom:18px}
    .hero h1{font-size:clamp(28px,6vw,56px);margin:0 0 10px;color:var(--fg);letter-spacing:1px}
    .hero p{color:var(--muted);margin:0 0 18px;max-width:820px}

    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);padding:20px;border-radius:12px;margin-bottom:18px;color:var(--muted)}
    .services-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;margin-top:12px}
    .service-item{background:transparent;padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
    .service-item h4{margin:0 0 8px;color:var(--accent)}

    /* contact form */
    form.contact{display:grid;gap:10px}
    input,textarea{padding:12px;border-radius:10px;border:1px solid rgba(0,0,0,0.08);background:transparent;color:inherit;width:100%}

    /* footer */
    footer{padding:20px 18px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .footer-left{display:flex;flex-direction:column;gap:6px}
    .footer-icons{display:flex;gap:18px;align-items:center;justify-content:center;flex:1;flex-wrap:nowrap}
    .footer-icons .circle-icon{flex:0 1 auto;width:clamp(56px,10vw,84px);height:clamp(56px,10vw,84px);border-radius:50%;border:3px solid var(--fg);display:inline-flex;align-items:center;justify-content:center;font-size:clamp(16px,4vw,28px);color:var(--fg);background:transparent;transition:background .18s,color .18s,transform .12s}
    .footer-icons .circle-icon:hover{background:var(--fg);color:var(--bg-1);transform:translateY(-4px)}
    .footer-right{min-width:160px;text-align:right;color:var(--muted)}

    /* mobile adjustments */
    @media (max-width: 820px){
      ul.nav-list{display:none;position:absolute;top:var(--header-h);right:14px;flex-direction:column;background:linear-gradient(180deg,var(--bg-2),var(--bg-1));padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);min-width:220px;box-shadow:0 18px 40px rgba(0,0,0,0.6)}
      ul.nav-list.show{display:flex}
      .hamburger{display:block}
      .controls-desktop{display:none}
      .mobile-controls{display:flex;gap:8px;margin-top:12px;justify-content:center}
    }
    @media (max-width:420px){
      .hero{padding:28px 10px}
      .footer-left{display:none}
      .footer-right{text-align:center;width:100%}
    }

  </style>
</head>
<body>
  <header>
    <div class="logo">MELEC</div>

    <div class="header-center">
      <nav>
        <ul id="navList" class="nav-list" role="menu">
          <li><a href="#home" class="nav-link" data-route="home" data-i18n="nav.home">Accueil</a></li>
          <li><a href="#services" class="nav-link" data-route="services" data-i18n="nav.services">Nos Services</a></li>
          <li><a href="#about" class="nav-link" data-route="about" data-i18n="nav.about">√Ä Propos</a></li>
          <li><a href="#contact" class="nav-link" data-route="contact" data-i18n="nav.contact">Contact</a></li>

          <!-- mobile-only controls inside the menu (appears when hamburger opens) -->
          <li class="mobile-controls" style="display:none">
            <button id="themeToggleMobile" class="circle-btn small" title="Theme">üåô</button>
            <button class="circle-btn small lang-btn" data-lang="fr">FR</button>
            <button class="circle-btn small lang-btn" data-lang="en">EN</button>
            <button class="circle-btn small lang-btn" data-lang="ar">AR</button>
          </li>
        </ul>
      </nav>
    </div>

    <div class="controls-desktop">
      <button id="themeToggle" class="circle-btn" title="Toggle theme"><i id="themeIcon" class="fas fa-moon"></i></button>
      <button class="circle-btn lang-btn" data-lang="fr">FR</button>
      <button class="circle-btn lang-btn" data-lang="en">EN</button>
      <button class="circle-btn lang-btn" data-lang="ar">AR</button>
      <button id="hamburger" class="hamburger" aria-expanded="false" aria-label="Open menu" title="Menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>
    </div>
  </header>

  <main>
    <!-- Home -->
    <section id="home" class="card page" aria-labelledby="heroTitle">
      <div class="hero">
        <h1 id="heroTitle" data-i18n="hero.title">MELEC BUILDING</h1>
        <p id="heroSub" data-i18n="hero.sub">Services √©lectriques professionnels ‚Äî installations, maintenance et s√©curit√© pour particuliers et entreprises.</p>
        <div style="margin-top:18px;display:flex;gap:12px;flex-wrap:wrap;justify-content:center">
          <a class="circle-btn" href="#contact" onclick="navigate('contact')" style="min-width:160px;text-align:center">Obtenir un devis</a>
          <a class="circle-btn" href="#services" onclick="navigate('services')" style="min-width:160px;text-align:center;background:var(--accent);border-color:var(--accent);color:var(--bg-1)">Voir nos services</a>
        </div>
      </div>
    </section>

    <!-- Services -->
    <section id="services" class="card page" aria-labelledby="servicesTitle">
      <h2 id="servicesTitle" data-i18n="services.title">Nos Services</h2>
      <p data-i18n="services.intro">Nous couvrons tous vos besoins √©lectriques, du r√©sidentiel au commercial, avec s√©curit√© et efficacit√©.</p>
      <div class="services-grid" id="servicesGrid"></div>
    </section>

    <!-- About -->
    <section id="about" class="card page" aria-labelledby="aboutTitle">
      <h2 id="aboutTitle" data-i18n="about.title">√Ä propos de nous</h2>
      <p id="aboutText" data-i18n="about.text">Melec Building r√©unit une √©quipe d'√©lectriciens certifi√©s, d√©di√©e √† la s√©curit√©, la qualit√© et la transparence.</p>
      <div style="display:flex;gap:12px;margin-top:14px;flex-wrap:wrap">
        <div style="flex:1;min-width:220px">
          <h4 data-i18n="about.missionTitle">Notre mission</h4>
          <p data-i18n="about.mission">Fournir des solutions √©lectriques s√ªres, √©conomes en √©nergie et adapt√©es √† chaque projet.</p>
        </div>
        <div style="flex:1;min-width:220px">
          <h4 data-i18n="about.teamTitle">Notre √©quipe</h4>
          <p data-i18n="about.team">Techniciens certifi√©s, chefs de projet et support client r√©actif.</p>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="card page" aria-labelledby="contactTitle">
      <h2 id="contactTitle" data-i18n="contact.title">Contactez-nous</h2>
      <p id="contactText" data-i18n="contact.text">Appelez-nous ou envoyez un message ‚Äî on vous r√©pond rapidement.</p>

      <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:12px">
        <div style="flex:1;min-width:260px">
          <form class="contact" id="contactForm">
            <input id="cname" placeholder="Votre nom" required />
            <input id="cemail" type="email" placeholder="Votre email" required />
            <textarea id="cmessage" rows="5" placeholder="Message" required></textarea>
            <div style="display:flex;gap:8px">
              <button type="submit" class="circle-btn" style="min-width:110px">Envoyer</button>
              <a href="tel:+212600000000" class="circle-btn" style="min-width:110px"><i class="fas fa-phone"></i></a>
            </div>
          </form>
        </div>

        <div style="flex:1;min-width:240px;color:var(--muted)">
          <strong data-i18n="contact.infoTitle">Infos</strong>
          <p style="margin:8px 0" data-i18n="contact.address">Casablanca, Maroc ‚Äî <a href="https://maps.app.goo.gl/ikg8DnRbzTjawiR69" target="_blank" style="color:var(--accent)">Voir sur la carte</a></p>
          <p><span data-i18n="contact.phoneLabel">T√©l√©phone:</span> <a href="tel:+212600000000" style="color:var(--fg)">+212 600 000 000</a></p>
          <p><span data-i18n="contact.hours">Horaires:</span> Lun‚ÄìDim: 08:00‚Äì20:00 (urgence 24/7)</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-left">
      <div style="font-weight:800;color:var(--accent)">Melec Building</div>
      <div style="color:var(--muted)">√âlectriciens certifi√©s ‚Äî Qualit√© & s√©curit√©</div>
    </div>

    <div class="footer-icons" role="toolbar" aria-label="Contact & socials">
      <a class="circle-icon" href="mailto:info@melec.com" aria-label="Email"><i class="fas fa-envelope"></i></a>
      <a class="circle-icon" href="tel:+212600000000" aria-label="Phone"><i class="fas fa-phone"></i></a>
      <a class="circle-icon" href="https://maps.app.goo.gl/ikg8DnRbzTjawiR69" target="_blank" aria-label="Location"><i class="fas fa-map-marker-alt"></i></a>
      <a class="circle-icon" href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
      <a class="circle-icon" href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
    </div>

    <div class="footer-right">
      <small style="color:var(--muted)">¬© <span id="year"></span> Melec Building</small>
    </div>
  </footer>

  <script>
    // --- Translations (nested for deep access) ---
    const translations = {
      fr: {
        nav:{home:'Accueil',services:'Nos Services',about:'√Ä Propos',contact:'Contact'},
        hero:{title:'MELEC BUILDING', sub:'Services √©lectriques professionnels ‚Äî installations, maintenance et s√©curit√© pour particuliers et entreprises.'},
        services:{title:'Nos Services', intro:'Nous couvrons tous vos besoins √©lectriques, du r√©sidentiel au commercial, avec s√©curit√© et efficacit√©.', items:[
          {title:'C√¢blage r√©sidentiel',desc:'Installation, r√©novation et mise √† la terre pour la s√©curit√© de votre foyer.'},
          {title:'Installations commerciales',desc:'Tableaux, c√¢blage industriel et conformit√© aux normes.'},
          {title:'√âclairage LED',desc:'Conception et optimisation √©nerg√©tique pour r√©ductions de co√ªts.'},
          {title:'D√©pannage 24/7',desc:'Intervention rapide et s√©curis√©e pour urgences √©lectriques.'}
        ]},
        about:{title:'√Ä propos de nous', text:'Melec Building r√©unit une √©quipe d\'√©lectriciens certifi√©s, d√©di√©e √† la s√©curit√©, la qualit√© et la transparence.', missionTitle:'Notre mission', mission:'Fournir des solutions √©lectriques s√ªres, √©conomes en √©nergie et adapt√©es √† chaque projet.', teamTitle:'Notre √©quipe', team:'Techniciens certifi√©s, chefs de projet et support client r√©actif.'},
        contact:{title:'Contactez-nous', text:'Appelez-nous ou envoyez un message ‚Äî on vous r√©pond rapidement.', infoTitle:'Infos', address:'Casablanca, Maroc', phoneLabel:'T√©l√©phone:', hours:'Horaires:'}
      },
      en: {
        nav:{home:'Home',services:'Our Services',about:'About',contact:'Contact'},
        hero:{title:'MELEC BUILDING', sub:'Professional electrical services ‚Äî installations, maintenance and safety for homes & businesses.'},
        services:{title:'Our Services', intro:'We cover all electrical needs ‚Äî residential to commercial ‚Äî with safety and efficiency.', items:[
          {title:'Residential Wiring',desc:'Installation, rewiring and earthing for household safety.'},
          {title:'Commercial Installations',desc:'Panels, industrial wiring and compliance.'},
          {title:'LED Lighting',desc:'Energy-optimised lighting design & installation.'},
          {title:'24/7 Repairs',desc:'Rapid, secure interventions for electrical emergencies.'}
        ]},
        about:{title:'About Us', text:'Melec Building brings together certified electricians committed to safety, quality and transparency.', missionTitle:'Our mission', mission:'Deliver reliable, energy-efficient electrical solutions tailored to every project.', teamTitle:'Our team', team:'Certified technicians, project leads and responsive customer support.'},
        contact:{title:'Contact Us', text:'Call or message us ‚Äî we\'ll get back to you quickly.', infoTitle:'Info', address:'Casablanca, Morocco', phoneLabel:'Phone:', hours:'Hours:'}
      },
      ar: {
        nav:{home:'ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©',services:'ÿÆÿØŸÖÿßÿ™ŸÜÿß',about:'ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿπŸÜÿß',contact:'ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß'},
        hero:{title:'MELEC BUILDING', sub:'ÿÆÿØŸÖÿßÿ™ ŸÉŸáÿ±ÿ®ÿßÿ¶Ÿäÿ© ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ‚Äî ÿ™ÿ±ŸÉŸäÿ®ÿßÿ™ ŸàÿµŸäÿßŸÜÿ© Ÿàÿ£ŸÖÿßŸÜ ŸÑŸÑŸÖŸÜÿßÿ≤ŸÑ ŸàÿßŸÑÿ¥ÿ±ŸÉÿßÿ™.'},
        services:{title:'ÿÆÿØŸÖÿßÿ™ŸÜÿß', intro:'ŸÜÿ∫ÿ∑Ÿä ÿ¨ŸÖŸäÿπ ÿßÿ≠ÿ™Ÿäÿßÿ¨ÿßÿ™ŸÉ ÿßŸÑŸÉŸáÿ±ÿ®ÿßÿ¶Ÿäÿ©ÿå ŸÖŸÜ ÿßŸÑÿ≥ŸÉŸÜŸäÿ© ÿ•ŸÑŸâ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ©ÿå ÿ®ÿ£ÿπŸÑŸâ ŸÖÿπÿßŸäŸäÿ± ÿßŸÑÿ£ŸÖÿßŸÜ.', items:[
          {title:'ÿßŸÑÿ™ŸàÿµŸäŸÑÿßÿ™ ÿßŸÑÿ≥ŸÉŸÜŸäÿ©',desc:'ÿ™ÿ±ŸÉŸäÿ® Ÿàÿ™ÿ¨ÿØŸäÿØ Ÿàÿ™ÿ£ÿ±Ÿäÿ∂ ŸÑÿ∂ŸÖÿßŸÜ ÿ£ŸÖÿßŸÜ ŸÖŸÜÿ≤ŸÑŸÉ.'},
          {title:'ÿßŸÑÿ™ÿ±ŸÉŸäÿ®ÿßÿ™ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ©',desc:'ŸÑŸàÿ≠ÿßÿ™ ŸàŸÉÿßÿ®ŸÑÿßÿ™ ÿµŸÜÿßÿπŸäÿ© ŸàÿßŸÑÿ™ÿ≤ÿßŸÖ ÿ®ÿßŸÑŸÖÿπÿßŸäŸäÿ±.'},
          {title:'ÿ•ÿ∂ÿßÿ°ÿ© LED',desc:'ÿ™ÿµŸÖŸäŸÖ Ÿàÿ™ÿ±ŸÉŸäÿ® ÿ£ŸÜÿ∏ŸÖÿ© ÿ•ÿ∂ÿßÿ°ÿ© ŸÖŸàŸÅÿ±ÿ© ŸÑŸÑÿ∑ÿßŸÇÿ©.'},
          {title:'ÿÆÿØŸÖÿ© ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶ 24/7',desc:'ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿ≥ÿ±Ÿäÿπÿ© Ÿàÿ¢ŸÖŸÜÿ© ŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶ ÿßŸÑŸÉŸáÿ±ÿ®ÿßÿ¶Ÿäÿ©.'}
        ]},
        about:{title:'ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿπŸÜÿß', text:'Melec Building ŸÅÿ±ŸäŸÇ ŸÖŸÜ ÿßŸÑŸÅŸÜŸäŸäŸÜ ÿßŸÑŸÖÿπÿ™ŸÖÿØŸäŸÜ ŸÖŸÑÿ™ÿ≤ŸÖŸàŸÜ ÿ®ÿßŸÑÿ£ŸÖÿßŸÜ ŸàÿßŸÑÿ¨ŸàÿØÿ© ŸàÿßŸÑÿ¥ŸÅÿßŸÅŸäÿ©.', missionTitle:'ŸÖŸáŸÖÿ™ŸÜÿß', mission:'ÿ™ŸÇÿØŸäŸÖ ÿ≠ŸÑŸàŸÑ ŸÉŸáÿ±ÿ®ÿßÿ¶Ÿäÿ© ÿ¢ŸÖŸÜÿ© ŸàŸÖŸàŸÅÿ±ÿ© ŸÑŸÑÿ∑ÿßŸÇÿ© ŸàŸÖÿµŸÖŸÖÿ© ŸÑŸÉŸÑ ŸÖÿ¥ÿ±Ÿàÿπ.', teamTitle:'ŸÅÿ±ŸäŸÇŸÜÿß', team:'ŸÅŸÜŸäŸàŸÜ ŸÖÿπÿ™ŸÖÿØŸàŸÜÿå ÿ±ÿ§ÿ≥ÿßÿ° ŸÖÿ¥ÿßÿ±Ÿäÿπ ŸàÿØÿπŸÖ ÿπŸÖŸÑÿßÿ° ÿ≥ÿ±Ÿäÿπ.'},
        contact:{title:'ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß', text:'ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß ÿ£Ÿà ÿ£ÿ±ÿ≥ŸÑ ÿ±ÿ≥ÿßŸÑÿ© ‚Äî ÿ≥ŸÜÿπŸàÿØ ÿ•ŸÑŸäŸÉ ÿ®ÿ≥ÿ±ÿπÿ©.', infoTitle:'ŸÖÿπŸÑŸàŸÖÿßÿ™', address:'ÿßŸÑÿØÿßÿ± ÿßŸÑÿ®Ÿäÿ∂ÿßÿ°ÿå ÿßŸÑŸÖÿ∫ÿ±ÿ®', phoneLabel:'ÿßŸÑŸáÿßÿ™ŸÅ:', hours:'ÿ≥ÿßÿπÿßÿ™ ÿßŸÑÿπŸÖŸÑ:'}
      }
    };

    // helper: deep get via dotted key
    function deepGet(obj, path){
      if(!obj || !path) return undefined;
      return path.split('.').reduce((o,k)=> (o && (o[k] !== undefined)) ? o[k] : undefined, obj);
    }

    function applyTranslations(lang){
      const t = translations[lang] || translations.fr;
      // set all [data-i18n] values
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        const val = deepGet(t, key);
        if(val !== undefined) el.textContent = val;
      });

      // build services grid from t.services.items
      const grid = document.getElementById('servicesGrid');
      grid.innerHTML = '';
      const items = deepGet(t, 'services.items') || [];
      items.forEach(it=>{
        const div = document.createElement('div'); div.className = 'service-item';
        div.innerHTML = `<h4>${it.title}</h4><p style="margin:6px 0 0;color:var(--muted);font-size:0.95rem">${it.desc}</p>`;
        grid.appendChild(div);
      });

      // update html lang and dir
      document.documentElement.lang = lang;
      if(lang === 'ar') document.documentElement.dir = 'rtl'; else document.documentElement.dir = 'ltr';

      // ensure nav link labels updated (they also have data-i18n)
      document.querySelectorAll('.nav-link').forEach(a=>{
        const route = a.dataset.route;
        const key = `nav.${route}`;
        const v = deepGet(t, key);
        if(v) a.textContent = v;
      });
    }

    function setLang(lang){
      sessionStorage.setItem('locale', lang);
      // apply and visually mark
      applyTranslations(lang);
      updateLangButtons(lang);
      // if mobile menu open, keep it open
    }

    function updateLangButtons(active){
      document.querySelectorAll('.lang-btn').forEach(btn=>{
        const is = btn.dataset.lang === active;
        btn.classList.toggle('active', is);
        if(is){ btn.style.background = 'var(--fg)'; btn.style.color = getComputedStyle(document.documentElement).getPropertyValue('--bg-1') || '#000'; }
        else { btn.style.background = 'transparent'; btn.style.color = 'var(--fg)'; }
      });
    }

    // Theme handling
    const themeIcon = document.getElementById('themeIcon');
    function setTheme(mode){
      if(mode === 'light'){
        document.body.classList.add('light');
        themeIcon.className = 'fas fa-sun';
        // mobile icon
        const m = document.getElementById('themeToggleMobile'); if(m) m.textContent = '‚òÄÔ∏è';
      } else {
        document.body.classList.remove('light');
        themeIcon.className = 'fas fa-moon';
        const m = document.getElementById('themeToggleMobile'); if(m) m.textContent = 'üåô';
      }
      sessionStorage.setItem('theme', mode);
    }

    // Toggle functions
    document.getElementById('themeToggle').addEventListener('click', ()=>{
      const isLight = document.body.classList.contains('light');
      setTheme(isLight ? 'dark' : 'light');
    });

    // mobile theme toggle (inside menu)
    const themeToggleMobile = document.getElementById('themeToggleMobile');
    if(themeToggleMobile) themeToggleMobile.addEventListener('click', ()=>{
      const isLight = document.body.classList.contains('light');
      setTheme(isLight ? 'dark' : 'light');
    });

    // lang button listeners (both desktop and mobile)
    document.querySelectorAll('.lang-btn').forEach(btn=>{
      btn.addEventListener('click', (e)=>{ const lang = e.currentTarget.dataset.lang; setLang(lang); });
    });

    // Navigation & routing
    function navigate(route){ location.hash = route; }
    function setActiveRouteFromHash(){
      const route = (location.hash || '#home').replace('#','') || 'home';
      document.querySelectorAll('.page').forEach(p=>p.style.display = (p.id === route)?'block':'none');
      document.querySelectorAll('.nav-link').forEach(a=>a.classList.toggle('active', a.dataset.route === route));
      // close mobile menu when navigating
      document.getElementById('navList').classList.remove('show');
      document.getElementById('hamburger').setAttribute('aria-expanded','false');
    }
    window.addEventListener('hashchange', setActiveRouteFromHash);

    // hamburger toggle
    document.getElementById('hamburger').addEventListener('click', ()=>{
      const list = document.getElementById('navList');
      const is = list.classList.toggle('show');
      document.getElementById('hamburger').setAttribute('aria-expanded', is ? 'true' : 'false');
      // ensure mobile controls visible inside menu when open
      const mob = document.querySelector('.mobile-controls'); if(mob) mob.style.display = is ? 'flex' : 'none';
    });

    // close menu on outside click
    document.addEventListener('click', (e)=>{
      const list = document.getElementById('navList');
      const hamb = document.getElementById('hamburger');
      if(!list.contains(e.target) && !hamb.contains(e.target)){
        if(list.classList.contains('show')){
          list.classList.remove('show');
          document.getElementById('hamburger').setAttribute('aria-expanded','false');
          const mob = document.querySelector('.mobile-controls'); if(mob) mob.style.display = 'none';
        }
      }
    });

    // make nav links close menu on click
    document.querySelectorAll('.nav-link').forEach(a=> a.addEventListener('click', ()=>{ document.getElementById('navList').classList.remove('show'); const mob = document.querySelector('.mobile-controls'); if(mob) mob.style.display = 'none'; }));

    // contact form
    document.getElementById('contactForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const name = document.getElementById('cname').value.trim();
      const email = document.getElementById('cemail').value.trim();
      const message = document.getElementById('cmessage').value.trim();
      const subject = encodeURIComponent((sessionStorage.getItem('locale') === 'en' ? 'Website inquiry from ' : 'Demande depuis le site ‚Äî ') + name);
      const body = encodeURIComponent(`Name: ${name}\nEmail: ${email}\n\nMessage:\n${message}`);
      window.location.href = `mailto:info@melec.com?subject=${subject}&body=${body}`;
    });

    // init
    (function init(){
      const savedLang = sessionStorage.getItem('locale') || 'fr';
      const savedTheme = sessionStorage.getItem('theme') || 'dark';
      applyTranslations(savedLang);
      updateLangButtons(savedLang);
      setTheme(savedTheme);
      if(!location.hash) location.hash = 'home';
      setActiveRouteFromHash();
      document.getElementById('year').textContent = new Date().getFullYear();
    })();

  </script>
</body>
</html>
